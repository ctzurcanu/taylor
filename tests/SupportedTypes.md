# dTypes

## Base

Type id rules:

```
11000000 - u
11000001 - u8
11000002 - u16
11000004 - u32

12000000 - i

byte
22000000 - byte
22000008 - byte1
22000010 - byte16

array - dim, sizes[]

44000000 - array
44000001 - array[1]
44000002 - array[2]
44000003 - array[3]


44000003 - arr[3]
44000002 - arr[2]
11000004 - u32
00000006
00000008
00000003
00000004
00000005
00000004


tuple - ids[]

ee000002
11000008
11000010
3
10


tuple(u32arr[2], u32arr[3])
ee000002 - tuple size 2
00000010
00000024
44000002 - arr[2]
11000020 - u32
6
7
44000003 - arr[3]
11000020 - u32
4
5
6
```

### None

Store def: `0xfffffffe000000051000000000`

```
00000005 - length
10000000 - sig
00       - steps count
```

### uint

Store def:
```
0xfffffffe0000000511000000030000000dee0000010000000522000001110000001d3333333800000000333333350000000200023333333000000003010003

00000005 - length
11000000 - sig
04       - steps count

0000000d - inputs length
ee000001
00000005
22000001
11

0000001d - steps length
33333338 - byte1 sig
00000000 - input indexes length
33333335 - contig
00000002 - input indexes length
00       - count/size
02       - byte1() result
33333330 - concat
00000003
01       - type_id header
00       - count/size
03       - contig result
```

Instantiate:

- `u32`:
```
0xffffffff11000000ee0000010000000711000003000004


ee000001 - tuple size 1
00000008 - end first tuple item
11000004 - u32
00000004 - value (size)

# result: 0xee000001000000081100000411111111

```
- `u256`: `0xffffffff11000000ee0000010000000711000003000020`
result: `0xee00000100000024110000201111111111111111111111111111111111111111111111111111111111111111`

## Composed

### Array

44000002 - arr[2]
11000004 - u32
content

Store def:
```
0xfffffffe0000000544000000040000000dee000001000000052200000144000000293333333700000002000133333335000000020204333333290000000104333333300000000403020605

00000005 - length
44000000 - sig
04       - steps count

0000000d - inputs length
ee000001
00000005
22000001
44

00000029
33333337 - dtnew (sig)
00000002 - input indexes length
00       - component type_id
01       - component size (optional - can be 0, if type is stored)
33333335 - contig
00000002 - input indexes length
02       - array length
04       - new() result
33333329 - getTypeSignature
00000001
04       - new() result
33333330 - concat
00000004
03       - type_header
02       - array length
06       - dtnew signature
05       - contig result
```

Get data: `0xfffffffd44000000`

Instantiate: (e.g. `u32array4`)
```
0xffffffff44000000ee000003000000080000000f0000001622000004110000001100000300000411000003000004

44000000 - array sig

ee000003 - tuple size
00000008
0000000f
00000016
22000004
11000000 - sig u
11000003
000004 - u32 size
11000003
000004 - array length
```
- result: `0xee00000100000018440000041100000411111111111111111111111111111111`

- `u32array6`: `0xffffffff44000000ee000003000000080000000f0000001622000004110000001100000300000411000003000006`. Result: `0xee000001000000204400000611000004111111111111111111111111111111111111111111111111`

- `u256array4`: `0xffffffff44000000ee000003000000080000000f0000001622000004110000001100000300002011000003000004`. Result: `0xee0000010000008844000004110000201111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111`

### N-Dimensional Array

Store def:
```
0xfffffffe00000005450000000700000030ee000004000000050000000d000000150000001c2200000145220000043333333322000004333333301100000300000100000047333333370000000200013333333100000003040206333333350000000208073333332900000001073333332800000002050333333332000000020b0233333330000000030c0a09

00000005 - length
45000000 - sig
07       - steps count

00000030 - inputs length
ee000004
00000005
0000000d
00000015
0000001c
22000001 - 03
45
22000004 - 04 - prod sig
33333333
22000004 - 05 - concat sig
33333330
11000003 - 06 - initial reduce value
000001

00000047
33333337 - dtnew (sig)    - 07
00000002 - input indexes length
00       - component type_id
01       - component size
33333331 - reduce            - 08
00000003
04       - prod sig 33333333
02       - lengths array
06       - initial reduce value - 1
33333335 - contig         - 09
00000002 - input indexes length
08       - reduce lengths prod
07       - new() result
33333329 - getTypeSignature  - 10
00000001
07       - new() result
33333328 - curry1         - 11
00000002
05       - concat 33333330
03       - type id - 45
33333332 - map            - 12
00000002
0b       - vfsig curry1
02       - lengths array
33333330 - concat         - 13
00000003
0c       - curry1 map result
0a       - dtnew signature
09       - contig result
```

E.g. `[[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]]` - `u32[2][5]`

Inputs:

- component type id
- component size
- lengths array

```
0xffffffff45000000ee000003000000080000000f0000001d2200000411000000110000030000044400000211000003000002000005

45000000 - array sig

ee000003 - tuple size
00000008
0000000f
0000001d
22000004 - sig u
11000000
11000003 - u32 size
000004
44000002 - lengths array
11000003
000002
000005
```
- result: `0xee0000010000003445000002450000051100000411111111111111111111111111111111111111111111111111111111111111111111111111111111`


- e.g. `[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]` - `u32[4][3]`

`0xffffffff45000000ee000003000000080000000f0000001d2200000411000000110000030000044400000211000003000004000003`.
Result: `0xee0000010000003c450000044500000311000004111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111`

## Union Type

Store def: `0xfffffffe0000000966666666000000000100000000000000093333333400000001ff`

```
00000009 - length
66666666 - sig
00000000 - size empty
01       - steps count

00000000 - inputs

00000009
33333334 - identity
00000001
ff       - selector value - e.g. 00000002
```

Instantiate call:  `0xffffffff666666660000000500000004000000080000000c0000001000000014000000140000000255555555888888887777777744444444`

```
66666666
00000005  - starts length
00000004  - length for selector
00000008  - tuple elem 1
0000000c
00000010
00000014

00000014 - inputs length
00000002 - selector value
55555555 - tuple:
88888888
77777777
44444444
```
